!function(){"use strict";const t=[];let e=!1,n=null;const a=(()=>{const t=document.currentScript||document.querySelector('script[src*="client.min.js"]')||document.querySelector("script[data-api]");return t&&t.dataset.api?t.dataset.api:"https://vercount-six.vercel.app/api/v2/log"})(),o="visitorCountData",r=async()=>{const t=window.location.href;if(!t.startsWith("http"))return null;const e=new AbortController,n=setTimeout(()=>e.abort(),5e3);try{const o=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t}),signal:e.signal});if(clearTimeout(n),!o.ok)throw new Error(`HTTP ${o.status}`);return(t=>"success"===t?.status&&t.data?t.data:"error"===t?.status?(console.warn("API error:",t.message),t.data||{site_uv:0,site_pv:0,page_pv:0}):t||{site_uv:0,site_pv:0,page_pv:0})(await o.json())}catch(t){return clearTimeout(n),"AbortError"===t.name?console.warn("Request timeout"):console.warn("API error:",t.message),null}},s=()=>{if(n)return n;return n={},["site_pv","page_pv","site_uv"].forEach(t=>{n[`busuanzi_value_${t}`]=document.getElementById(`busuanzi_value_${t}`),n[`busuanzi_container_${t}`]=document.getElementById(`busuanzi_container_${t}`),n[`vercount_value_${t}`]=document.getElementById(`vercount_value_${t}`),n[`vercount_container_${t}`]=document.getElementById(`vercount_container_${t}`)}),n},c=t=>{const e=s();["site_pv","page_pv","site_uv"].forEach(n=>{const a=String(t[n]||"0"),o=e[`busuanzi_value_${n}`],r=e[`vercount_value_${n}`];o&&(o.textContent=a),r&&(r.textContent=a)})},i=()=>{const t=s();["site_pv","page_pv","site_uv"].forEach(e=>{const n=t[`busuanzi_container_${e}`],a=t[`vercount_container_${e}`];n&&(n.style.display="inline"),a&&(a.style.display="inline")})};var u;u=async()=>{(()=>{const t=s();["site_pv","page_pv","site_uv"].forEach(e=>{const n=t[`busuanzi_container_${e}`],a=t[`vercount_container_${e}`];n&&(n.style.display="none"),a&&(a.style.display="none")})})();const t=await r();if(t)c(t),(t=>{try{localStorage.setItem(o,JSON.stringify(t))}catch(t){}})(t),i();else{const t=(()=>{try{const t=localStorage.getItem(o);return t?JSON.parse(t):null}catch(t){return null}})();t&&(c(t),i())}},e||"loading"!==document.readyState?u():(t.push(u),document.addEventListener("DOMContentLoaded",()=>{e=!0,t.forEach(t=>t())},{once:!0}))}();